{% load static %}
{% include "finalApp/header.html" %}


<!-- Only accessible if the user = author of listing -->
{% if user == listing.author %}

<center>
  <h2>Edit Listing</h2>
  <div class="listing-content">
    <h4>{{listing.title}}</h4>
    <div style="margin-bottom: 15px; width: 40%">
      <img src="{% static 'images/'|add:listing.file_path %}" class="img-responsive center-img card-img" alt="...">
    </div>
    <!-- Form will have the original values places inside in Value attribute -->
    <form action="" method="post" enctype="multipart/form-data">
    {% csrf_token %} 
      <div class="form-group">
        <label for="title"><b>Title</b></label>
        <input type="text" class="form-control"id="title" value="{{listing.title}}" name="title">
      </div>
      <div class="form-group">
        <div class="form-row">
          <div class="col-md-6">
            <label for="price"><b>Price</b></label>
            <input type="number" class="form-control" id="price" value="{{listing.price}}" name="price">
          </div>
          <div class="col-md-6">
            <label for="inventory"><b>Inventory</b></label>
            <input type="number" class="form-control" id="inventory" value="{{listing.inventory}}" name="inventory">
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="text"><b>Description</b></label>
        <textarea class="form-control" id="text" name="text" rows="5">{{listing.text}}</textarea>
      </div>
      <div class="option-buttons">
        <button type="submit" onclick="return confirm('Are you sure you want to delete this Listing?')" name="delete" class="btn btn-danger">Delete Listing</button>
        <button type="submit" name="edit" class="btn btn-primary">Confirm Changes</button>
      </div>
    </form>
  </div>
</center>

{% else %}
  <center><h4>You do not have permission to edit this Listing</h4></center>
{% endif %}